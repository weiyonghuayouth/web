<div id="editTopic" class="addTopic">
    <script id="editTopic-tpl" type="text/html">
        <div class="lay-table" style="height: 400px;">

            <div class="f-lay">
                <div class="f-opt">所属专题：</div>
                <div class="f-ody">
                    <select id="select_subject_groupId" name="groupId" class="form-control" value="{{subject.groupId}}">
                        {{each subject_group.subjectgroup as value}}
                        <option value="{{value.id}}">{{value.name}}</option>
                        {{/each}}
                    </select>
                </div>
            </div>

            <div class="f-lay">
                <div class="f-opt">专题名称：</div>
                <div class="f-ody"><input type="text" id="es-name" class="form-control" value="{{subject.name}}"/></div>
            </div>
            <div class="f-lay">
                <div class="f-opt">查询库：</div>
                <div class="f-ody"><input type="text" id="es-index-id" name="esIndex" class="form-control"
                                          value="{{subjectExtend.esIndex}}"/></div>
            </div>

            <div class="f-lay">
                <div class="f-opt">搜索类型：</div>
                <div class="f-ody">
                    <div class="checkbox">
                        <label><input id="es_seerch_type1" type="checkbox" value="1"
                                      {{subjectExtend.searchType1}}>标题</label>
                        <label><input id="es_seerch_type2" type="checkbox" value="2"
                                      {{subjectExtend.searchType2}}>内容</label>
                    </div>
                </div>
            </div>

            <div class="f-lay">
                <div class="f-opt">准确级别：</div>
                <div class="f-ody">
                    <select id="es-level" >
                        <option value="1" {{subjectExtend.leve1}}>按天</option>
                        <option value="2"  {{subjectExtend.leve2}}>12小时</option>
                        <option value="3"  {{subjectExtend.leve3}}>6小时</option>
                        <option value="4"  {{subjectExtend.leve4}}>3小时</option>
                        <option value="5"  {{subjectExtend.leve5}}>1小时</option>
                        <option value="6"  {{subjectExtend.leve6}}>实时</option>
                    </select>
                </div>
            </div>

            <div class="f-lay">
                <div class="f-opt">标题和内容关系：</div>
                <div class="f-ody">
                    <div class="checkbox"  style="margin-top: 0px;margin-bottom:0px">
                        <label style="position: relative;"><input type="radio" id="trv_or"
                                                                  name="isOr" {{subjectExtend.isor1}}
                                                                  style="position: absolute;top: 1px; left: 2px;">或者</label>
                        <label style="position: relative;"><input type="radio" id="trv_and"
                                                                  name="isOr" {{subjectExtend.isor2}}
                                                                  style="position: absolute;top: 1px; left: 6px;">并且</label>
                    </div>
                </div>
            </div>
            <div class="f-lay">
                <div class="f-opt">是否发布到app：</div>
                <div class="f-ody">
                    <div class="checkbox" style="margin-top: 10px;margin-bottom:10px">
                        <label style="position: relative;"><input type="radio" id = "PutApp"  name="isnoapp" {{subjectExtend.is}} style="position: absolute;top: 1px; left: 2px;">是</label>
                        <label style="position: relative;"><input type="radio" id = "PutApp-no" name="isnoapp" {{subjectExtend.no}} style="position: absolute;top: 1px; left: 6px;">否</label>
                    </div>
                </div>
            </div>
            <div class="f-lay valign-center">
                <div class="f-opt">标题匹配规则：</div>
                <div class="f-ody"><textarea rows="5" id="titleMatchRegex" class="form-control">{{subject.data.titleMatchRegex}}</textarea>
                </div>
            </div>
            <div class="f-lay valign-center">
                <div class="f-opt">标题排除规则：</div>
                <div class="f-ody"><textarea rows="5" id="titleNoMatchRegex" class="form-control">{{subject.data.titleNoMatchRegex}}</textarea>
                </div>
            </div>
            <div class="f-lay valign-center">
                <div class="f-opt">内容匹配规则：</div>
                <div class="f-ody"><textarea rows="5" id="contextMatchRegex" class="form-control">{{subject.data.contextMatchRegex}}</textarea>
                </div>
            </div>
            <div class="f-lay valign-center">
                <div class="f-opt">内容排除规则：</div>
                <div class="f-ody"><textarea rows="5" id="contextNoMatchRegex" class="form-control">{{subject.data.contextNoMatchRegex}}</textarea>
                </div>
            </div>
        </div>
        <div class="addTopic_btns">
            <button type="button" onclick="topic_edit(false,'{{subject.id}}');" class="ui-btn" onclick="">确定
            </button>
            <button type="button" onclick="layer.closeAll();" class="ui-btn">关闭</button>
        </div>
    </script>
</div>
<script>
    getSubjectValue();

    //赋值
    function getSubjectValue() {
        var oData = {
            "token": "getobject",
            "id": $("#group").find(".a_on").attr("idname")
        };

        $.ajax({
            type: "post",
            url: URL + 'zh/subject/0/getobject.do',
            cache: false,
            data: oData,
            dataType: "json",
            success: function (data) {
                if (data.state == 0) {
                    var oData = data.data;

                    oData.subjectExtend.leve1 = "";
                    oData.subjectExtend.leve2= "";
                    oData.subjectExtend.leve3= "";
                    oData.subjectExtend.leve4= "";
                    oData.subjectExtend.leve5= "";
                    oData.subjectExtend.leve6= "";

                    switch (oData.subjectExtend.level){
                        case 1:
                            oData.subjectExtend.leve1 = 'selected="selected"';
                            break;
                        case 2:
                            oData.subjectExtend.leve2 ='selected="selected"';
                            break;
                        case 3:
                            oData.subjectExtend.leve3 ='selected="selected"';
                            break;
                        case 4:
                            oData.subjectExtend.leve4 = 'selected="selected"';
                            break;
                        case 5:
                            oData.subjectExtend.leve5 ='selected="selected"';
                            break;
                        case 6:
                            oData.subjectExtend.leve6 ='selected="selected"';
                            break;
                        default:
                            oData.subjectExtend.leve1 = 'selected="selected"';
                            break;
                    }

                    if (oData.subjectExtend.isOr) {

                        oData.subjectExtend.isor1 = "checked";
                        oData.subjectExtend.isor2 = "";
                    } else {
                        oData.subjectExtend.isor1 = "";
                        oData.subjectExtend.isor2 = "checked";
                    }
                    if (oData.publishToApp == "1") {

                        oData.subjectExtend.is= "checked";
                        oData.subjectExtend.no = "";
                    } else {
                        oData.subjectExtend.is = "";
                        oData.subjectExtend.no = "checked";
                    }

                    if (oData.subject.searchType.indexOf("1") > -1) {
                        oData.subjectExtend.searchType1 = "checked";
                    }

                    if (oData.subject.searchType.indexOf("2") > -1) {
                        oData.subjectExtend.searchType2 = "checked";
                    }

                    oData.subject_group = JSON.parse(getXCookie2("USER_GROUP_LIST"));
                    var oHtml = template("editTopic-tpl", oData);
                    $("#editTopic").html(oHtml);

                } else {
                    $("#editTopic").html("页面丢失了。。");
                    layer.alert(data.msg, {
                        skin: "jf-dialog",
                        closeBtn: 0,
                    }, function () {
                        layer.closeAll();
                    })
                }
            },
            error: function () {
                layer.alert('找不到页面，请检查你的网络并刷新页面', {
                    skin: "jf-dialog",
                    closeBtn: 0,
                }, function () {
                    layer.closeAll();
                })
            }

        })

    }

</script>